var apiServices=angular.module("apiServices",[]),baseUrl="http://localhost:4000/api/";apiServices.factory("Users",function($http,$window,$q){return{register:function(user){return $http.post(baseUrl+"register",user)},login:function(user){var deferred=$q.defer();return $http.post(baseUrl+"login",user).success(function(data){$http.defaults.headers.common.Authorization=data.token,$window.localStorage.curUser=user.username,$window.localStorage.curToken=data.token,console.log($http.defaults.headers.common.Authorization),deferred.resolve(user)})["catch"](function(err){deferred.reject(err)}),deferred.promise},setProfilePic:function(image){var fd=new FormData;return fd.append("image",image),$http.defaults.headers.common.Authorization=$window.localStorage.curToken,$http.post(baseUrl+"profilePic/"+$window.localStorage.curUser,fd,{headers:{"Content-Type":void 0},transformRequest:angular.identity})},getProfilePicUrl:function(username){return baseUrl+"profilePic/"+username},getCurrent:function(){return $http.get(baseUrl+"user/"+$window.localStorage.curUser)},editCurrent:function(newUser){return $http.defaults.headers.common.Authorization=$window.localStorage.curToken,$http.put(baseUrl+"user/"+$window.localStorage.curUser,newUser)},deleteCurrent:function(){return $http.defaults.headers.common.Authorization=$window.localStorage.curToken,$http["delete"](baseUrl+"user/"+$window.localStorage.curUser)},getUser:function(username){return console.log(baseUrl+"user/"+username),$http.get(baseUrl+"user/"+username)}}}),apiServices.factory("Collections",function($http,$window,$q){return{get:function(select_options){return $http.get(baseUrl+"collections",{params:select_options})},post:function(data){return $http.defaults.headers.common.Authorization=$window.localStorage.curToken,console.log($http.defaults.headers.common.Authorization),$http.post(baseUrl+"collection",data)},"delete":function(id){return $http.defaults.headers.common.Authorization=$window.localStorage.curToken,$http["delete"](baseUrl+"collection/"+id)},getOne:function(select_options){return $http.get(baseUrl+"collection/"+select_options)},put:function(id,data){return $http.defaults.headers.common.Authorization=$window.localStorage.curToken,$http.put(baseUrl+"collection/"+id,data)}}}),apiServices.factory("Items",function($http,$window,$q){return{get:function(id){return $http.get(baseUrl+"item/"+id)},post:function(type,image){var fd=new FormData;return fd.append("image",image),fd.append("type",type),$http.post(baseUrl+"item",fd,{headers:{"Content-Type":void 0},transformRequest:angular.identity})},put:function(id,name,type,image){var fd=new FormData;return fd.append("image",image),fd.append("name",name),fd.append("type",type),$http.put(baseUrl+"item/"+id,fd,{headers:{"Content-Type":void 0},transformRequest:angular.identity})},getItemsPicUrl:function(id){return baseUrl+"itemImage/"+id},"delete":function(id){return $http["delete"](baseUrl+"item/"+id)}}});